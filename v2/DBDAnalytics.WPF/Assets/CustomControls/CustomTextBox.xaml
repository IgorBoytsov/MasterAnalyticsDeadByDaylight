<UserControl x:Class="DBDAnalytics.WPF.Assets.CustomControls.CustomTextBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:DBDAnalytics.WPF.Assets.CustomControls"
             mc:Ignorable="d" 
             Width="Auto"
             d:DesignWidth="800"
             x:Name="Root">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 1. Динамический счетчик символов -->
        <TextBlock Grid.Row="0"
                   HorizontalAlignment="Right"
                   FontSize="12"
                   Margin="0,0,10,0"
                   Foreground="White">
            <TextBlock.Text>
                <MultiBinding StringFormat="({0} / {1})" FallbackValue="0">
                    <!-- Первый параметр: текущая длина текста -->
                    <Binding Path="NameRecord.Length" ElementName="Root"/>
                    <!-- Второй параметр: максимальная длина -->
                    <Binding Path="MaxLength" ElementName="Root"/>
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>

        <!-- 2. TextBox, который использует MaxLength от родителя -->
        <TextBox Grid.Row="1"  
                 Style="{StaticResource AddMatch.TextBox.InputData}"
                 Text="{Binding NameRecord, ElementName=Root, UpdateSourceTrigger=PropertyChanged}"
                 MaxLength="{Binding MaxLength, ElementName=Root}"
                 TextWrapping="WrapWithOverflow"
                 Foreground="White"
                 FontSize="12"
                 Margin="5"
                 HorizontalAlignment="Stretch"
                 d:BorderBrush="Black"/>
    </Grid>
</UserControl>
