<Page x:Class="DBDAnalytics.Client.WPF.Views.Pages.AddMatchPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:DBDAnalytics.Client.WPF.Views.Pages" 
      xmlns:behaviors="clr-namespace:Shared.WPF.Behaviors;assembly=Shared.WPF"
      xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
      xmlns:pages="clr-namespace:DBDAnalytics.Client.WPF.ViewModels.Pages" 
      xmlns:enums="clr-namespace:Shared.WPF.Enums;assembly=Shared.WPF" 
      xmlns:clientEnums="clr-namespace:DBDAnalytics.Client.WPF.Enums" 
      d:DataContext="{d:DesignInstance Type=pages:AddMatchPageViewModel}"
      mc:Ignorable="d" 
      d:Width="1300"
      d:Background="{StaticResource Solid.Application.Background}"
      Title="AddMatchPage">

    <!--d:Height="700"
      d:Width="1200"-->

    <b:Interaction.Behaviors>
        <behaviors:AsyncInitializeBehavior />
    </b:Interaction.Behaviors>

    <Page.Resources>

        <!--#region ListViewStyle -->

        <Style x:Key="AddMatch.ListView.Base" TargetType="ListView">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListView">
                        <Border BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                Background="{TemplateBinding Background}" 
                                Padding="{TemplateBinding Padding}" 
                                SnapsToDevicePixels="true">

                            <ScrollViewer Focusable="false"
                                          Style="{StaticResource CustomScrollViewerStyle}" 
                                          CanContentScroll="{TemplateBinding ScrollViewer.CanContentScroll}"
                                          VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}"
                                          HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}">

                                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>

                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--#endregion-->

        <!--#region ListViewItem -->

        <Style x:Key="ListViewItem.AddMAtchPage.Base" TargetType="ListViewItem">
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListViewItem">
                        <Border x:Name="mainBorder"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}"
                                Margin="{TemplateBinding Margin}"
                                CornerRadius="10"
                                SnapsToDevicePixels="true">
                            <ContentPresenter />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--#endregion-->

    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--==========Popups==========-->

        <!--#region ImagesPopup -->

        <Popup IsOpen="{Binding ImagesPopup.IsOpen}"
               PlacementTarget="{Binding ImagesPopup.PlacementTarget}"
               Tag="{Binding}" 
               Placement="Bottom"
               MaxHeight="{Binding ImagesPopup.MaxHeight}"
               StaysOpen="False"
               AllowsTransparency="True"
               PopupAnimation="Fade"
               MinHeight="100" MinWidth="100">

            <Border BorderBrush="{StaticResource Solid.Border.Popup.ContentBlock.BorderBrush}"
                    Background="{StaticResource Solid.Border.Popup.ContentBlock.Background}"
                    BorderThickness="2"
                    CornerRadius="5"
                    Padding="5">
                <ListView x:Name="ImagesListView" 
                          ItemsSource="{Binding Images}"
                          SelectedItem="{Binding SelectedPath}"
                          Style="{StaticResource AddMatch.ListView.Base}"
                          ItemsPanel="{StaticResource StackPanelTemplate}"
                          SelectionMode="Single"
                          ScrollViewer.CanContentScroll="False"
                          VirtualizingPanel.ScrollUnit="Pixel"
                          ScrollViewer.VerticalScrollBarVisibility="Visible"
                          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                          VirtualizingPanel.IsVirtualizing="True"
                          VirtualizingStackPanel.VirtualizationMode="Recycling"
                          VirtualizingPanel.CacheLength="15,15"
                          VirtualizingPanel.CacheLengthUnit="Item">

                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <DockPanel Width="300">
                                <Button Style="{StaticResource Button.App}" Content="Просмотр"
                                        HorizontalAlignment="Right"
                                        DockPanel.Dock="Top"/>
                                <Image Source="{Binding }" 
                                       DockPanel.Dock="Top"/>
                                <WrapPanel VerticalAlignment="Bottom" HorizontalAlignment="Center">
                                    <Button Style="{StaticResource Button.App}" Content="Начало"
                                            Command="{Binding DataContext.SelectMatchImageCommand, RelativeSource={RelativeSource AncestorType=Popup}}" CommandParameter="{x:Static clientEnums:MatchImageType.StartMatch}">
                                        <b:Interaction.Triggers>
                                            <b:EventTrigger EventName="Click">
                                                <b:ChangePropertyAction TargetObject="{Binding RelativeSource={RelativeSource AncestorType=ListViewItem}}"
                                                                        PropertyName="IsSelected"
                                                                        Value="True" />
                                            </b:EventTrigger>
                                        </b:Interaction.Triggers>
                                    </Button>
                                    <Button Style="{StaticResource Button.App}" Content="Конец"
                                            Command="{Binding DataContext.SelectMatchImageCommand, RelativeSource={RelativeSource AncestorType=Popup}}" CommandParameter="{x:Static clientEnums:MatchImageType.EndMatch}">
                                        <b:Interaction.Triggers>
                                            <b:EventTrigger EventName="Click">
                                                <b:ChangePropertyAction TargetObject="{Binding RelativeSource={RelativeSource AncestorType=ListViewItem}}"
                                                                        PropertyName="IsSelected"
                                                                        Value="True" />
                                            </b:EventTrigger>
                                        </b:Interaction.Triggers>
                                    </Button>
                                    <Button Style="{StaticResource Button.App}" Content="Итог"
                                            Command="{Binding DataContext.SelectMatchImageCommand, RelativeSource={RelativeSource AncestorType=Popup}}" CommandParameter="{x:Static clientEnums:MatchImageType.Result}">
                                        <b:Interaction.Triggers>
                                            <b:EventTrigger EventName="Click">
                                                <b:ChangePropertyAction TargetObject="{Binding RelativeSource={RelativeSource AncestorType=ListViewItem}}"
                                                                        PropertyName="IsSelected"
                                                                        Value="True" />
                                            </b:EventTrigger>
                                        </b:Interaction.Triggers>
                                    </Button>
                                </WrapPanel>
                            </DockPanel>

                        </DataTemplate>
                    </ListView.ItemTemplate>

                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="Padding" Value="0"/>
                            <Setter Property="Margin" Value="2"/>
                            <Setter Property="Padding" Value="4"/>
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="BorderBrush" Value="Transparent"/>
                            <Setter Property="BorderThickness" Value="2"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListViewItem">
                                        <Border x:Name="mainBorder"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                Padding="{TemplateBinding Padding}"
                                                Margin="{TemplateBinding Margin}"
                                                CornerRadius="10"
                                                SnapsToDevicePixels="true">
                                            <ContentPresenter />
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ListView.ItemContainerStyle>

                </ListView>
            </Border>
        </Popup>

        <!--#endregion-->

        <!--#region Элементы управления -->

        <Border Style="{StaticResource Border.ContentBlock}"  Margin="20,0,20,0">
            <DockPanel>
                <Button Style="{StaticResource Button.App}"
                        Content="Изображения" 
                        Margin="0,0,0,0"
                        DockPanel.Dock="Left">
                    <Button.Command>
                        <Binding Path="DataContext.ImagesPopup.ShowCommand" RelativeSource="{RelativeSource Self}"/>
                    </Button.Command>
                    <Button.CommandParameter>
                        <Binding RelativeSource="{RelativeSource Self}"/>
                    </Button.CommandParameter>
                </Button>

                <Button Style="{StaticResource Button.App}" 
                        Command="{Binding SelectImagesCommand}"
                        Margin="5,0,0,0"
                        HorizontalAlignment="Left">
                    <Button.Content>
                        <Control Template="{StaticResource FolderImages}"/>
                    </Button.Content>
                </Button>

                <Button Style="{StaticResource Button.App}" 
                        Command="{Binding CreateMatchCommandAsync}"
                        Margin="5,0,0,0"
                        HorizontalAlignment="Right"
                        Content="Создать матч"/>

            </DockPanel>
        </Border>

        <!--#endregion-->

        <TabControl Grid.Row="1" SelectedIndex="{Binding MainTabControlIndex}" d:SelectedIndex="1" Margin="0,2,0,0">

            <TabControl.Resources>
                <Style TargetType="TabPanel">
                    <Setter Property="HorizontalAlignment" Value="Center"/>
                </Style>
            </TabControl.Resources>

            <!--#region Киллер -->

            <TabItem Header="Киллер">

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="500"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!--#region Доп инфа -->

                        <Border Grid.Column="0" Grid.Row="0" Style="{StaticResource Border.ContentBlock}">
                            <DockPanel Margin="10">

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Steam" VerticalAlignment="Center"/>
                                    <!--<ToggleButton Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>-->
                                    <ListView ItemsSource="{Binding Platforms}"
                                              SelectedItem="{Binding Killer.Platform}"
                                              d:ItemsSource="{d:SampleData ItemCount=2}"
                                              Style="{StaticResource AddMatch.ListView.Base}"
                                              Background="Transparent"
                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                              VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,2,0,10">

                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Rows="1"/>
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>

                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="Padding" Value="0"/>
                                                <Setter Property="Margin" Value="2"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="BorderThickness" Value="2"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                            <Border x:Name="mainBorder"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                Padding="{TemplateBinding Padding}"
                                                                Margin="{TemplateBinding Margin}"
                                                                CornerRadius="6"
                                                                SnapsToDevicePixels="true">
                                                                <ContentPresenter />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                    </ListView>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top"  Margin="0,2,0,10">
                                    <TextBlock Text="Анонимный"/>
                                    <ToggleButton IsChecked="{Binding Killer.IsAnanyms}" Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Игрок вышел?"/>
                                    <ToggleButton IsChecked="{Binding Killer.IsBot}" Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Ассоциация" VerticalAlignment="Center"/>
                                    <!--<ToggleButton Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>-->
                                    <ListView ItemsSource="{Binding PlayerAssociations}"
                                              SelectedItem="{Binding Killer.PlayerAssociation}"
                                              d:ItemsSource="{d:SampleData ItemCount=2}"
                                              Style="{StaticResource AddMatch.ListView.Base}"
                                              Background="Transparent"
                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                              VerticalAlignment="Center" HorizontalAlignment="Right" >

                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Rows="1"/>
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>

                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="Padding" Value="0"/>
                                                <Setter Property="Margin" Value="2"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="BorderThickness" Value="2"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                            <Border x:Name="mainBorder"
                                                                    Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                                    Padding="{TemplateBinding Padding}"
                                                                    Margin="{TemplateBinding Margin}"
                                                                    CornerRadius="6"
                                                                    SnapsToDevicePixels="true">
                                                                <ContentPresenter />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                    </ListView>

                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <Grid VerticalAlignment="Top">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Column="0" Grid.Row="1" Text="Престиж" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Column="1" Grid.Row="1"  ItemsSource="{Binding Prestige}" Style="{StaticResource BaseComboBox}" Width="100" VerticalAlignment="Center" HorizontalAlignment="Right"/>

                                    <TextBlock  Grid.Column="0" Grid.Row="0" Text="Счет" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Grid.Row="0" Style="{StaticResource TextBox.InputData}" Width="100" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                                </Grid>

                            </DockPanel>
                        </Border>

                        <!--#endregion-->

                        <!--#region Вырезка из скрина с итогами -->

                        <Border Grid.Column="1" Grid.ColumnSpan="2" Style="{StaticResource Border.ContentBlock}">
                            <Image Source="{Binding Killer.KillerMatchImage}"/>
                        </Border>

                        <!--#endregion-->

                        <!--#region Киллеры -->

                        <Border Grid.Column="0" Grid.Row="1" Style="{StaticResource Border.ContentBlock}">
                            <ListView ItemsSource="{Binding Killers}"
                                      d:ItemsSource="{d:SampleData ItemCount=5}"
                                      SelectedItem="{Binding Killer.SelectedKiller}"
                                      Style="{StaticResource ListView.Base}"
                                      ItemsPanel="{StaticResource StackPanelTemplate}"
                                      SelectionMode="Single"
                                      ScrollViewer.CanContentScroll="False"
                                      VirtualizingPanel.ScrollUnit="Pixel"
                                      ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                      VirtualizingPanel.IsVirtualizing="True"
                                      VirtualizingStackPanel.VirtualizationMode="Recycling"
                                      VirtualizingPanel.CacheLength="15,15"
                                      VirtualizingPanel.CacheLengthUnit="Item">

                                <!--#region ItemContainerStyle -->

                                <ListView.ItemContainerStyle>
                                    <Style TargetType="ListViewItem">
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="2"/>
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="2"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ListViewItem">
                                                    <Border x:Name="mainBorder"
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            Padding="{TemplateBinding Padding}"
                                                            Margin="{TemplateBinding Margin}"
                                                            CornerRadius="10"
                                                            SnapsToDevicePixels="true">
                                                        <ContentPresenter />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>

                                </ListView.ItemContainerStyle>

                                <!--#endregion-->

                                <!--#region ItemTemplate: Разметка каждого элемента -->

                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" CornerRadius="10" Height="100">
                                            <DockPanel>
                                                <Image Source="{Binding Image}" Margin="10" HorizontalAlignment="Left"/>
                                                <TextBlock Text="{Binding Name}" FontSize="16" Margin="2,5,0,0" Foreground="White" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                            </DockPanel>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>

                                <!--#endregion-->

                            </ListView>
                        </Border>

                        <!--#endregion-->

                        <GridSplitter />

                        <!--#region TabControl -->

                        <Border Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1" Style="{StaticResource Border.ContentBlock}">
                            <TabControl SelectedIndex="{Binding KillerTabControlIndex}">

                                <TabItem Header="Улучшения">

                                    <!--#region Улучшения киллера -->

                                    <Grid Grid.Row="1" Grid.Column="0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Элементы управления -->

                                        <WrapPanel>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding Killer.AddonsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Grid}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource BurgerMenu}"/>
                                                </Button.Content>
                                            </Button>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding Killer.AddonsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Burger}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource GridMenu}"/>
                                                </Button.Content>
                                            </Button>
                                        </WrapPanel>

                                        <!--#endregion-->

                                        <!--#region Список -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding KillerAddonsView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <ListView.Resources>

                                                <DataTemplate x:Key="GridKillerAddons">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.Killer.ToggleAddonSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinned}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>

                                                <DataTemplate x:Key="BurgerKillerAddons">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" MinHeight="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.Killer.ToggleAddonSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                    </Border>
                                                </DataTemplate>

                                            </ListView.Resources>

                                            <ListView.Style>
                                                <Style TargetType="ListView" BasedOn="{StaticResource AddMatch.ListView.Base}">
                                                    <Setter Property="ItemTemplate" Value="{StaticResource GridKillerAddons}"/>
                                                    <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Killer.AddonsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Grid}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource GridKillerAddons}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Killer.AddonsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Burger}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource BurgerKillerAddons}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.Style>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinned}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinned}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                                <TabItem Header="Перки">

                                    <!--#region Все перки киллера-->

                                    <Grid Grid.Row="1" Grid.Column="1">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Элементы управления -->

                                        <WrapPanel>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding Killer.PerksViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Grid}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource BurgerMenu}"/>
                                                </Button.Content>
                                            </Button>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding Killer.PerksViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Burger}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource GridMenu}"/>
                                                </Button.Content>
                                            </Button>
                                        </WrapPanel>

                                        <!--#endregion-->

                                        <!--#region Список -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding KillerPerksView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <ListView.Resources>

                                                <DataTemplate x:Key="GridKillerPerks">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.Killer.TogglePerkSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinned}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>

                                                <DataTemplate x:Key="BurgerKillerPerks">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}"  Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.Killer.TogglePerkSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                    </Border>
                                                </DataTemplate>

                                            </ListView.Resources>

                                            <ListView.Style>
                                                <Style TargetType="ListView" BasedOn="{StaticResource AddMatch.ListView.Base}">
                                                    <Setter Property="ItemTemplate" Value="{StaticResource GridKillerPerks}"/>
                                                    <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Killer.PerksViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Grid}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource GridKillerPerks}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Killer.PerksViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Burger}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource BurgerKillerPerks}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.Style>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinned}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}" Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinned}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                                <TabItem Header="Подношения">

                                    <!--#region Подношения-->

                                    <Grid Grid.Row="1" Grid.Column="2">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Элементы управления -->

                                        <WrapPanel>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding Killer.OfferingsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Grid}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource BurgerMenu}"/>
                                                </Button.Content>
                                            </Button>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding Killer.OfferingsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Burger}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource GridMenu}"/>
                                                </Button.Content>
                                            </Button>
                                        </WrapPanel>

                                        <!--#endregion-->

                                        <!--#region Список -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding KillerOfferingsView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <ListView.Resources>

                                                <DataTemplate x:Key="GridKillerOfferings">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.Killer.ToggleOfferingSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinned}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>

                                                <DataTemplate x:Key="BurgerKillerOfferings">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}"  Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.Killer.ToggleOfferingSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                    </Border>
                                                </DataTemplate>

                                            </ListView.Resources>

                                            <ListView.Style>
                                                <Style TargetType="ListView" BasedOn="{StaticResource AddMatch.ListView.Base}">
                                                    <Setter Property="ItemTemplate" Value="{StaticResource GridKillerOfferings}"/>
                                                    <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Killer.OfferingsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Grid}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource GridKillerOfferings}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Killer.OfferingsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Burger}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource BurgerKillerOfferings}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.Style>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinned}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}" Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinned}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                            </TabControl>
                        </Border>

                        <!--#endregion-->

                    </Grid>
                </Grid>

            </TabItem>

            <!--#endregion-->

            <!--#region Выживший №1 -->

            <TabItem Header="Выживший #1">

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="550"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!--#region Доп инфа -->

                        <Border Grid.Column="0" Grid.Row="0" Style="{StaticResource Border.ContentBlock}">
                            <DockPanel Margin="5">

                                <DockPanel DockPanel.Dock="Top">
                                    <!--<TextBlock Text="Платформа" VerticalAlignment="Center"/>-->

                                    <ListView ItemsSource="{Binding Platforms}"
                                              SelectedItem="{Binding FirstSurvivor.Platform}"
                                              d:ItemsSource="{d:SampleData ItemCount=2}"
                                              Style="{StaticResource AddMatch.ListView.Base}"
                                              Background="Transparent"
                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                              VerticalAlignment="Top" HorizontalAlignment="Stretch">

                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Rows="1"/>
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>

                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="Padding" Value="0"/>
                                                <Setter Property="Margin" Value="2"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="BorderThickness" Value="2"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                            <Border x:Name="mainBorder"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                Padding="{TemplateBinding Padding}"
                                                                Margin="{TemplateBinding Margin}"
                                                                CornerRadius="6"
                                                                SnapsToDevicePixels="true">
                                                                <ContentPresenter />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                    </ListView>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top" Margin="0,10,0,10"/>

                                <Grid DockPanel.Dock="Top" >
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <DockPanel Grid.Column="0">
                                        <TextBlock Text="Анонимный"/>
                                        <ToggleButton IsChecked="{Binding FirstSurvivor.IsAnanyms}" Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>
                                    </DockPanel>

                                    <DockPanel Grid.Column="1">
                                        <TextBlock Text="Игрок вышел?" HorizontalAlignment="Left"/>
                                        <ToggleButton IsChecked="{Binding FirstSurvivor.IsBot}" Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>
                                    </DockPanel>
                                </Grid>

                                <Separator DockPanel.Dock="Top" Margin="0,10,0,0"/>

                                <DockPanel DockPanel.Dock="Top" >
                                    <!--<TextBlock Text="Ассоциация" VerticalAlignment="Center"/>-->

                                    <ListView ItemsSource="{Binding PlayerAssociations}"
                                              SelectedItem="{Binding FirstSurvivor.PlayerAssociation}"
                                              d:ItemsSource="{d:SampleData ItemCount=2}"
                                              Style="{StaticResource AddMatch.ListView.Base}"
                                              Background="Transparent"
                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                              VerticalAlignment="Center" HorizontalAlignment="Center">

                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Rows="1"/>
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>

                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="Padding" Value="0"/>
                                                <Setter Property="Margin" Value="2"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="BorderThickness" Value="2"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                            <Border x:Name="mainBorder"
                                                                    Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                                    Padding="{TemplateBinding Padding}"
                                                                    Margin="{TemplateBinding Margin}"
                                                                    CornerRadius="6"
                                                                    SnapsToDevicePixels="true">
                                                                <ContentPresenter />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                    </ListView>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top" Margin="0, 10, 0, 10"/>

                                <UniformGrid DockPanel.Dock="Top" Columns="4" Rows="2">

                                    <TextBlock Grid.Column="0" Grid.Row="0" Text="Престиж" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                                    <TextBlock Grid.Column="1" Grid.Row="0" Text="Счет" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                                    <TextBlock Grid.Column="2" Grid.Row="0" Text="Капли" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                                    <TextBlock Grid.Column="3" Grid.Row="0" Text="Опыт" HorizontalAlignment="Center" Margin="0,0,0,5"/>

                                    <ComboBox Grid.Column="0" Grid.Row="1" 
                                              ItemsSource="{Binding Prestige}" 
                                              SelectedItem="{Binding FirstSurvivor.Prestige}" 
                                              Style="{StaticResource BaseComboBox}" 
                                              VerticalAlignment="Center" 
                                              Margin="5,0"/>

                                    <TextBox Grid.Column="1" Grid.Row="1" 
                                             Text="{Binding FirstSurvivor.Score}" 
                                             Style="{StaticResource TextBox.InputData}" 
                                             VerticalAlignment="Center" 
                                             Margin="5,0"/>

                                    <TextBox Grid.Column="2" Grid.Row="1"
                                             Text="{Binding FirstSurvivor.NumberOfBloodDrops}" 
                                             Style="{StaticResource TextBox.InputData}" 
                                             VerticalAlignment="Center" 
                                             Margin="5,0"/>

                                    <TextBox Grid.Column="3" Grid.Row="1"  
                                                Text="{Binding FirstSurvivor.Experience}" 
                                                Style="{StaticResource TextBox.InputData}" 
                                                VerticalAlignment="Center" 
                                                Margin="5,0"/>

                                </UniformGrid>

                                <Separator DockPanel.Dock="Top" Margin="0, 10, 0, 0"/>

                                <ListView ItemsSource="{Binding TypeDeaths}"
                                          SelectedItem="{Binding FirstSurvivor.TypeDeath}"
                                          d:ItemsSource="{d:SampleData ItemCount=5}"
                                          Style="{StaticResource AddMatch.ListView.Base}"
                                          Background="Transparent"
                                          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                          VerticalAlignment="Top">

                                    <ListView.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Rows="1"/>
                                        </ItemsPanelTemplate>
                                    </ListView.ItemsPanel>

                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>

                                    <ListView.ItemContainerStyle>
                                        <Style TargetType="ListViewItem">
                                            <Setter Property="Padding" Value="0"/>
                                            <Setter Property="Margin" Value="2"/>
                                            <Setter Property="Background" Value="Transparent"/>
                                            <Setter Property="BorderBrush" Value="Transparent"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="ListViewItem">
                                                        <Border x:Name="mainBorder"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                Padding="{TemplateBinding Padding}"
                                                                Margin="{TemplateBinding Margin}"
                                                                CornerRadius="6"
                                                                SnapsToDevicePixels="true">
                                                            <ContentPresenter />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                </Trigger>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ListView.ItemContainerStyle>
                                </ListView>

                            </DockPanel>
                        </Border>

                        <!--#endregion-->

                        <!--#region Вырезка из скрина с итогами -->

                        <Border Grid.Column="1" Grid.ColumnSpan="2" Style="{StaticResource Border.ContentBlock}">
                            <Image Source="{Binding FirstSurvivor.MatchImage}"/>
                        </Border>

                        <!--#endregion-->

                        <!--#region Выжившие -->

                        <Border Grid.Column="0" Grid.Row="1" Style="{StaticResource Border.ContentBlock}">
                            <ListView ItemsSource="{Binding Survivors}"
                                      d:ItemsSource="{d:SampleData ItemCount=5}"
                                      SelectedItem="{Binding FirstSurvivor.SelectedSurvivor}"
                                      Style="{StaticResource ListView.Base}"
                                      ItemsPanel="{StaticResource StackPanelTemplate}"
                                      SelectionMode="Single"
                                      ScrollViewer.CanContentScroll="False"
                                      VirtualizingPanel.ScrollUnit="Pixel"
                                      ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                      VirtualizingPanel.IsVirtualizing="True"
                                      VirtualizingStackPanel.VirtualizationMode="Recycling"
                                      VirtualizingPanel.CacheLength="15,15"
                                      VirtualizingPanel.CacheLengthUnit="Item">

                                <!--#region ItemContainerStyle -->

                                <ListView.ItemContainerStyle>
                                    <Style TargetType="ListViewItem">
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="2"/>
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="2"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ListViewItem">
                                                    <Border x:Name="mainBorder"
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            Padding="{TemplateBinding Padding}"
                                                            Margin="{TemplateBinding Margin}"
                                                            CornerRadius="10"
                                                            SnapsToDevicePixels="true">
                                                        <ContentPresenter />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>

                                </ListView.ItemContainerStyle>

                                <!--#endregion-->

                                <!--#region ItemTemplate: Разметка каждого элемента -->

                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" CornerRadius="10" Height="100">
                                            <DockPanel>
                                                <Image Source="{Binding Image}" Margin="10" HorizontalAlignment="Left"/>
                                                <TextBlock Text="{Binding Name}" FontSize="16" Margin="2,5,0,0" Foreground="White" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                            </DockPanel>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>

                                <!--#endregion-->

                            </ListView>
                        </Border>

                        <!--#endregion-->

                        <!--#region TabControl -->

                        <Border Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1" Style="{StaticResource Border.ContentBlock}">
                            <TabControl SelectedIndex="{Binding FirstSurvivorTabControlIndex}">

                                <TabItem Header="Перки">

                                    <!--#region Перки первого выжившего -->

                                    <Grid Grid.Row="1" Grid.Column="0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Элементы управления -->

                                        <WrapPanel>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding FirstSurvivor.PerksViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Grid}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource BurgerMenu}"/>
                                                </Button.Content>
                                            </Button>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding FirstSurvivor.PerksViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Burger}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource GridMenu}"/>
                                                </Button.Content>
                                            </Button>
                                        </WrapPanel>

                                        <!--#endregion-->

                                        <!--#region Список -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding FirstSurvivor.PerksView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <ListView.Resources>

                                                <DataTemplate x:Key="GridFirstSurvivorPerks">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.FirstSurvivor.TogglePerkSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedFirst}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>

                                                <DataTemplate x:Key="BurgerFirstSurvivorPerks">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}"  Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.FirstSurvivor.TogglePerkSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                    </Border>
                                                </DataTemplate>

                                            </ListView.Resources>

                                            <ListView.Style>
                                                <Style TargetType="ListView" BasedOn="{StaticResource AddMatch.ListView.Base}">
                                                    <Setter Property="ItemTemplate" Value="{StaticResource GridFirstSurvivorPerks}"/>
                                                    <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding FirstSurvivor.PerksViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Grid}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource GridFirstSurvivorPerks}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding FirstSurvivor.PerksViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Burger}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource BurgerFirstSurvivorPerks}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.Style>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFirst}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFirst}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                                <TabItem Header="Предмет">

                                    <!--#region Предмет и его улучшение-->

                                    <Grid Grid.Row="1" Grid.Column="1">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Список предметов -->

                                        <ListView Grid.Row="0" 
                                                  ItemsSource="{Binding Items}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectedItem="{Binding FirstSurvivor.SelectedItem}"
                                                  Style="{StaticResource ListView.Base}"
                                                  ItemsPanel="{StaticResource WrapPanelTemplate}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <!--#region ItemTemplate: Разметка каждого элемента -->

                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" CornerRadius="10" Height="100">
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="10" HorizontalAlignment="Left"/>
                                                        </DockPanel>
                                                    </Border>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>

                                            <!--#endregion-->

                                            <!--#region ItemContainerStyle -->

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem">
                                                    <Setter Property="Padding" Value="0"/>
                                                    <Setter Property="Margin" Value="2"/>
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                                    <Setter Property="BorderThickness" Value="2"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="ListViewItem">
                                                                <Border x:Name="mainBorder"
                                                                        Background="{TemplateBinding Background}"
                                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                                        Padding="{TemplateBinding Padding}"
                                                                        Margin="{TemplateBinding Margin}"
                                                                        CornerRadius="10"
                                                                        SnapsToDevicePixels="true">
                                                                    <ContentPresenter />
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsSelected" Value="True">
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </Trigger>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>

                                            </ListView.ItemContainerStyle>

                                            <!--#endregion-->

                                        </ListView>

                                        <!--#endregion-->

                                        <!--#region Список улучшений -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding FirstSurvivor.ItemAddonsView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  Style="{StaticResource ListView.Base}"
                                                  ItemsPanel="{StaticResource StackPanelTemplate}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <!--#region ItemTemplate: Разметка каждого элемента -->

                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.FirstSurvivor.ToggleAddonSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedFirst}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>

                                            <!--#endregion-->

                                            <!--#region ItemContainerStyle -->

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFirst}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFirst}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                            <!--#endregion-->

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                                <TabItem Header="Подношения">

                                    <!--#region Подношения-->

                                    <Grid Grid.Row="1" Grid.Column="2">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Элементы управления -->

                                        <WrapPanel>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding FirstSurvivor.OfferingsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Grid}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource BurgerMenu}"/>
                                                </Button.Content>
                                            </Button>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding FirstSurvivor.OfferingsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Burger}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource GridMenu}"/>
                                                </Button.Content>
                                            </Button>
                                        </WrapPanel>

                                        <!--#endregion-->

                                        <!--#region Список -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding FirstSurvivor.OfferingsView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <ListView.Resources>

                                                <DataTemplate x:Key="GridFirstSurvivorOfferings">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.FirstSurvivor.ToggleOfferingSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedFirst}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>

                                                <DataTemplate x:Key="BurgerFirstSurvivorOfferings">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.FirstSurvivor.ToggleOfferingSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                    </Border>
                                                </DataTemplate>

                                            </ListView.Resources>

                                            <ListView.Style>
                                                <Style TargetType="ListView" BasedOn="{StaticResource AddMatch.ListView.Base}">
                                                    <Setter Property="ItemTemplate" Value="{StaticResource GridFirstSurvivorOfferings}"/>
                                                    <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding FirstSurvivor.OfferingsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Grid}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource GridFirstSurvivorOfferings}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding FirstSurvivor.OfferingsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Burger}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource BurgerFirstSurvivorOfferings}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.Style>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFirst}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFirst}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                            </TabControl>
                        </Border>

                        <!--#endregion-->

                    </Grid>
                </Grid>

            </TabItem>

            <!--#endregion-->

            <!--#region Выживший №2 -->

            <TabItem Header="Выживший #2">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="500"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!--#region Доп инфа -->

                        <Border Grid.Column="0" Grid.Row="0" Style="{StaticResource Border.ContentBlock}">
                            <DockPanel Margin="10">

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Steam" VerticalAlignment="Center"/>

                                    <ListView ItemsSource="{Binding Platforms}"
                                              SelectedItem="{Binding SecondSurvivor.Platform}"
                                              d:ItemsSource="{d:SampleData ItemCount=2}"
                                              Style="{StaticResource AddMatch.ListView.Base}"
                                              Background="Transparent"
                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                              VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,2,0,10">

                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Rows="1"/>
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>

                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="Padding" Value="0"/>
                                                <Setter Property="Margin" Value="2"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="BorderThickness" Value="2"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                            <Border x:Name="mainBorder"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                Padding="{TemplateBinding Padding}"
                                                                Margin="{TemplateBinding Margin}"
                                                                CornerRadius="6"
                                                                SnapsToDevicePixels="true">
                                                                <ContentPresenter />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                    </ListView>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top"  Margin="0,2,0,10">
                                    <TextBlock Text="Анонимный"/>
                                    <ToggleButton IsChecked="{Binding SecondSurvivor.IsAnanyms}" Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Игрок вышел?"/>
                                    <ToggleButton IsChecked="{Binding SecondSurvivor.IsBot}" Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Ассоциация" VerticalAlignment="Center"/>

                                    <ListView ItemsSource="{Binding PlayerAssociations}"
                                              SelectedItem="{Binding SecondSurvivor.PlayerAssociation}"
                                              d:ItemsSource="{d:SampleData ItemCount=2}"
                                              Style="{StaticResource AddMatch.ListView.Base}"
                                              Background="Transparent"
                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                              VerticalAlignment="Center" HorizontalAlignment="Right">

                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Rows="1"/>
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>

                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="Padding" Value="0"/>
                                                <Setter Property="Margin" Value="2"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="BorderThickness" Value="2"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                            <Border x:Name="mainBorder"
                                                                    Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                                    Padding="{TemplateBinding Padding}"
                                                                    Margin="{TemplateBinding Margin}"
                                                                    CornerRadius="6"
                                                                    SnapsToDevicePixels="true">
                                                                <ContentPresenter />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                    </ListView>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <Grid DockPanel.Dock="Top">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Column="0" Grid.Row="1" Text="Престиж" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Column="1" Grid.Row="1" SelectedItem="{Binding SecondSurvivor.Prestige}" ItemsSource="{Binding Prestige}" Style="{StaticResource BaseComboBox}" Width="100" VerticalAlignment="Center" HorizontalAlignment="Right"/>

                                    <TextBlock  Grid.Column="0" Grid.Row="0" Text="Счет" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Grid.Row="0" Text="{Binding SecondSurvivor.Score}" Style="{StaticResource TextBox.InputData}" Width="100" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                                </Grid>

                                <ListView ItemsSource="{Binding TypeDeaths}"
                                          SelectedItem="{Binding SecondSurvivor.TypeDeath}"
                                          d:ItemsSource="{d:SampleData ItemCount=5}"
                                          Style="{StaticResource AddMatch.ListView.Base}"
                                          Background="Transparent"
                                          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                          VerticalAlignment="Top" Margin="0,2,0,10">

                                    <ListView.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Rows="1"/>
                                        </ItemsPanelTemplate>
                                    </ListView.ItemsPanel>

                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>

                                    <ListView.ItemContainerStyle>
                                        <Style TargetType="ListViewItem">
                                            <Setter Property="Padding" Value="0"/>
                                            <Setter Property="Margin" Value="2"/>
                                            <Setter Property="Background" Value="Transparent"/>
                                            <Setter Property="BorderBrush" Value="Transparent"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="ListViewItem">
                                                        <Border x:Name="mainBorder"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                Padding="{TemplateBinding Padding}"
                                                                Margin="{TemplateBinding Margin}"
                                                                CornerRadius="6"
                                                                SnapsToDevicePixels="true">
                                                            <ContentPresenter />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                </Trigger>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ListView.ItemContainerStyle>
                                </ListView>

                            </DockPanel>
                        </Border>

                        <!--#endregion-->

                        <!--#region Вырезка из скрина с итогами -->

                        <Border Grid.Column="1" Grid.ColumnSpan="2" Style="{StaticResource Border.ContentBlock}">
                            <Image Source="{Binding SecondSurvivor.MatchImage}"/>
                        </Border>

                        <!--#endregion-->

                        <!--#region Выжившие -->

                        <Border Grid.Column="0" Grid.Row="1" Style="{StaticResource Border.ContentBlock}">
                            <ListView ItemsSource="{Binding Survivors}"
                                      d:ItemsSource="{d:SampleData ItemCount=5}"
                                      SelectedItem="{Binding SecondSurvivor.SelectedSurvivor}"
                                      Style="{StaticResource ListView.Base}"
                                      ItemsPanel="{StaticResource StackPanelTemplate}"
                                      SelectionMode="Single"
                                      ScrollViewer.CanContentScroll="False"
                                      VirtualizingPanel.ScrollUnit="Pixel"
                                      ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                      VirtualizingPanel.IsVirtualizing="True"
                                      VirtualizingStackPanel.VirtualizationMode="Recycling"
                                      VirtualizingPanel.CacheLength="15,15"
                                      VirtualizingPanel.CacheLengthUnit="Item">

                                <!--#region ItemContainerStyle -->

                                <ListView.ItemContainerStyle>
                                    <Style TargetType="ListViewItem">
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="2"/>
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="2"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ListViewItem">
                                                    <Border x:Name="mainBorder"
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            Padding="{TemplateBinding Padding}"
                                                            Margin="{TemplateBinding Margin}"
                                                            CornerRadius="10"
                                                            SnapsToDevicePixels="true">
                                                        <ContentPresenter />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>

                                </ListView.ItemContainerStyle>

                                <!--#endregion-->

                                <!--#region ItemTemplate: Разметка каждого элемента -->

                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" CornerRadius="10" Height="100">
                                            <DockPanel>
                                                <Image Source="{Binding Image}" Margin="10" HorizontalAlignment="Left"/>
                                                <TextBlock Text="{Binding Name}" FontSize="16" Margin="2,5,0,0" Foreground="White" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                            </DockPanel>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>

                                <!--#endregion-->

                            </ListView>
                        </Border>

                        <!--#endregion-->

                        <Border Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1" Style="{StaticResource Border.ContentBlock}">
                            <TabControl SelectedIndex="{Binding SecondSurvivorTabControlIndex}">

                                <TabItem Header="Перки">

                                    <!--#region Перки первого выжившего -->

                                    <Grid Grid.Row="1" Grid.Column="0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Элементы управления -->

                                        <WrapPanel>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding SecondSurvivor.PerksViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Grid}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource BurgerMenu}"/>
                                                </Button.Content>
                                            </Button>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding SecondSurvivor.PerksViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Burger}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource GridMenu}"/>
                                                </Button.Content>
                                            </Button>
                                        </WrapPanel>

                                        <!--#endregion-->

                                        <!--#region Список -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding SecondSurvivor.PerksView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <ListView.Resources>

                                                <DataTemplate x:Key="GridSecondSurvivorPerks">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.SecondSurvivor.TogglePerkSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedSecond}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>

                                                <DataTemplate x:Key="BurgerSecondSurvivorPerks">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}"  Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.SecondSurvivor.TogglePerkSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                    </Border>
                                                </DataTemplate>

                                            </ListView.Resources>

                                            <ListView.Style>
                                                <Style TargetType="ListView" BasedOn="{StaticResource AddMatch.ListView.Base}">
                                                    <Setter Property="ItemTemplate" Value="{StaticResource GridSecondSurvivorPerks}"/>
                                                    <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SecondSurvivor.PerksViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Grid}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource GridSecondSurvivorPerks}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding SecondSurvivor.PerksViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Burger}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource BurgerSecondSurvivorPerks}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.Style>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedSecond}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedSecond}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                                <TabItem Header="Предмет">

                                    <!--#region Предмет и его улучшение-->

                                    <Grid Grid.Row="1" Grid.Column="1">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Список предметов -->

                                        <ListView Grid.Row="0" 
                                                  ItemsSource="{Binding Items}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectedItem="{Binding SecondSurvivor.SelectedItem}"
                                                  Style="{StaticResource ListView.Base}"
                                                  ItemsPanel="{StaticResource WrapPanelTemplate}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <!--#region ItemTemplate: Разметка каждого элемента -->

                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" CornerRadius="10" Height="100">
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="10" HorizontalAlignment="Left"/>
                                                        </DockPanel>
                                                    </Border>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>

                                            <!--#endregion-->

                                            <!--#region ItemContainerStyle -->

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem">
                                                    <Setter Property="Padding" Value="0"/>
                                                    <Setter Property="Margin" Value="2"/>
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                                    <Setter Property="BorderThickness" Value="2"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="ListViewItem">
                                                                <Border x:Name="mainBorder"
                                                                        Background="{TemplateBinding Background}"
                                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                                        Padding="{TemplateBinding Padding}"
                                                                        Margin="{TemplateBinding Margin}"
                                                                        CornerRadius="10"
                                                                        SnapsToDevicePixels="true">
                                                                    <ContentPresenter />
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsSelected" Value="True">
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </Trigger>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>

                                            </ListView.ItemContainerStyle>

                                            <!--#endregion-->

                                        </ListView>

                                        <!--#endregion-->

                                        <!--#region Список улучшений -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding SecondSurvivor.ItemAddonsView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  Style="{StaticResource ListView.Base}"
                                                  ItemsPanel="{StaticResource StackPanelTemplate}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <!--#region ItemTemplate: Разметка каждого элемента -->

                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.SecondSurvivor.ToggleAddonSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedSecond}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>

                                            <!--#endregion-->

                                            <!--#region ItemContainerStyle -->

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedSecond}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedSecond}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                            <!--#endregion-->

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                                <TabItem Header="Подношения">

                                    <!--#region Подношения-->

                                    <Grid Grid.Row="1" Grid.Column="2">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Элементы управления -->

                                        <WrapPanel>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding SecondSurvivor.OfferingsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Grid}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource BurgerMenu}"/>
                                                </Button.Content>
                                            </Button>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding SecondSurvivor.OfferingsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Burger}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource GridMenu}"/>
                                                </Button.Content>
                                            </Button>
                                        </WrapPanel>

                                        <!--#endregion-->

                                        <!--#region Список -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding SecondSurvivor.OfferingsView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <ListView.Resources>

                                                <DataTemplate x:Key="GridSecondSurvivorOfferings">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.SecondSurvivor.ToggleOfferingSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedSecond}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>

                                                <DataTemplate x:Key="BurgerSecondSurvivorOfferings">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}"  Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.SecondSurvivor.ToggleOfferingSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                    </Border>
                                                </DataTemplate>

                                            </ListView.Resources>

                                            <ListView.Style>
                                                <Style TargetType="ListView" BasedOn="{StaticResource AddMatch.ListView.Base}">
                                                    <Setter Property="ItemTemplate" Value="{StaticResource GridSecondSurvivorOfferings}"/>
                                                    <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SecondSurvivor.OfferingsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Grid}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource GridSecondSurvivorOfferings}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding SecondSurvivor.OfferingsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Burger}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource BurgerSecondSurvivorOfferings}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.Style>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedSecond}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedSecond}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                            </TabControl>
                        </Border>
                    </Grid>
                </Grid>
            </TabItem>

            <!--#endregion-->

            <!--#region Выживший №3 -->

            <TabItem Header="Выживший #3">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="500"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!--#region Доп инфа -->

                        <Border Grid.Column="0" Grid.Row="0" Style="{StaticResource Border.ContentBlock}">
                            <DockPanel Margin="10">

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Steam" VerticalAlignment="Center"/>

                                    <ListView ItemsSource="{Binding Platforms}"
                                              SelectedItem="{Binding ThirdSurvivor.Platform}"
                                              d:ItemsSource="{d:SampleData ItemCount=2}"
                                              Style="{StaticResource AddMatch.ListView.Base}"
                                              Background="Transparent"
                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                              VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,2,0,10">

                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Rows="1"/>
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>

                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="Padding" Value="0"/>
                                                <Setter Property="Margin" Value="2"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="BorderThickness" Value="2"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                            <Border x:Name="mainBorder"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                Padding="{TemplateBinding Padding}"
                                                                Margin="{TemplateBinding Margin}"
                                                                CornerRadius="6"
                                                                SnapsToDevicePixels="true">
                                                                <ContentPresenter />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                    </ListView>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top"  Margin="0,2,0,10">
                                    <TextBlock Text="Анонимный"/>
                                    <ToggleButton IsChecked="{Binding ThirdSurvivor.IsAnanyms}" Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Игрок вышел?"/>
                                    <ToggleButton IsChecked="{Binding ThirdSurvivor.IsBot}" Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Ассоциация" VerticalAlignment="Center"/>
                                    <!--<ToggleButton Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>-->
                                    <ListView ItemsSource="{Binding PlayerAssociations}"
                                              SelectedItem="{Binding ThirdSurvivor.PlayerAssociation}"
                                              d:ItemsSource="{d:SampleData ItemCount=2}"
                                              Style="{StaticResource AddMatch.ListView.Base}"
                                              Background="Transparent"
                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                              VerticalAlignment="Center" HorizontalAlignment="Right">

                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Rows="1"/>
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>

                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="Padding" Value="0"/>
                                                <Setter Property="Margin" Value="2"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="BorderThickness" Value="2"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                            <Border x:Name="mainBorder"
                                                                    Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                                    Padding="{TemplateBinding Padding}"
                                                                    Margin="{TemplateBinding Margin}"
                                                                    CornerRadius="6"
                                                                    SnapsToDevicePixels="true">
                                                                <ContentPresenter />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                    </ListView>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <Grid DockPanel.Dock="Top">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Column="0" Grid.Row="1" Text="Престиж" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Column="1" Grid.Row="1" SelectedItem="{Binding ThirdSurvivor.Prestige}" ItemsSource="{Binding Prestige}" Style="{StaticResource BaseComboBox}" Width="100" VerticalAlignment="Center" HorizontalAlignment="Right"/>

                                    <TextBlock  Grid.Column="0" Grid.Row="0" Text="Счет" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Grid.Row="0" Text="{Binding ThirdSurvivor.Score}" Style="{StaticResource TextBox.InputData}" Width="100" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                                </Grid>

                                <ListView ItemsSource="{Binding TypeDeaths}"
                                          SelectedItem="{Binding ThirdSurvivor.TypeDeath}"
                                          d:ItemsSource="{d:SampleData ItemCount=5}"
                                          Style="{StaticResource AddMatch.ListView.Base}"
                                          Background="Transparent"
                                          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                          VerticalAlignment="Top" Margin="0,2,0,10">

                                    <ListView.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Rows="1"/>
                                        </ItemsPanelTemplate>
                                    </ListView.ItemsPanel>

                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>

                                    <ListView.ItemContainerStyle>
                                        <Style TargetType="ListViewItem">
                                            <Setter Property="Padding" Value="0"/>
                                            <Setter Property="Margin" Value="2"/>
                                            <Setter Property="Background" Value="Transparent"/>
                                            <Setter Property="BorderBrush" Value="Transparent"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="ListViewItem">
                                                        <Border x:Name="mainBorder"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                Padding="{TemplateBinding Padding}"
                                                                Margin="{TemplateBinding Margin}"
                                                                CornerRadius="6"
                                                                SnapsToDevicePixels="true">
                                                            <ContentPresenter />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                </Trigger>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ListView.ItemContainerStyle>
                                </ListView>

                            </DockPanel>
                        </Border>

                        <!--#endregion-->

                        <!--#region Вырезка из скрина с итогами -->

                        <Border Grid.Column="1" Grid.ColumnSpan="2" Style="{StaticResource Border.ContentBlock}">
                            <Image Source="{Binding ThirdSurvivor.MatchImage}"/>
                        </Border>

                        <!--#endregion-->

                        <!--#region Выжившие -->

                        <Border Grid.Column="0" Grid.Row="1" Style="{StaticResource Border.ContentBlock}">
                            <ListView ItemsSource="{Binding Survivors}"
                                      d:ItemsSource="{d:SampleData ItemCount=5}"
                                      SelectedItem="{Binding ThirdSurvivor.SelectedSurvivor}"
                                      Style="{StaticResource ListView.Base}"
                                      ItemsPanel="{StaticResource StackPanelTemplate}"
                                      SelectionMode="Single"
                                      ScrollViewer.CanContentScroll="False"
                                      VirtualizingPanel.ScrollUnit="Pixel"
                                      ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                      VirtualizingPanel.IsVirtualizing="True"
                                      VirtualizingStackPanel.VirtualizationMode="Recycling"
                                      VirtualizingPanel.CacheLength="15,15"
                                      VirtualizingPanel.CacheLengthUnit="Item">

                                <!--#region ItemContainerStyle -->

                                <ListView.ItemContainerStyle>
                                    <Style TargetType="ListViewItem">
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="2"/>
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="2"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ListViewItem">
                                                    <Border x:Name="mainBorder"
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            Padding="{TemplateBinding Padding}"
                                                            Margin="{TemplateBinding Margin}"
                                                            CornerRadius="10"
                                                            SnapsToDevicePixels="true">
                                                        <ContentPresenter />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>

                                </ListView.ItemContainerStyle>

                                <!--#endregion-->

                                <!--#region ItemTemplate: Разметка каждого элемента -->

                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" CornerRadius="10" Height="100">
                                            <DockPanel>
                                                <Image Source="{Binding Image}" Margin="10" HorizontalAlignment="Left"/>
                                                <TextBlock Text="{Binding Name}" FontSize="16" Margin="2,5,0,0" Foreground="White" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                            </DockPanel>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>

                                <!--#endregion-->

                            </ListView>
                        </Border>

                        <!--#endregion-->

                        <Border Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1" Style="{StaticResource Border.ContentBlock}">
                            <TabControl SelectedIndex="{Binding ThirdSurvivorTabControlIndex}">

                                <TabItem Header="Перки">

                                    <!--#region Перки первого выжившего -->

                                    <Grid Grid.Row="1" Grid.Column="0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Элементы управления -->

                                        <WrapPanel>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding ThirdSurvivor.PerksViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Grid}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource BurgerMenu}"/>
                                                </Button.Content>
                                            </Button>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding ThirdSurvivor.PerksViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Burger}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource GridMenu}"/>
                                                </Button.Content>
                                            </Button>
                                        </WrapPanel>

                                        <!--#endregion-->

                                        <!--#region Список -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding ThirdSurvivor.PerksView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <ListView.Resources>

                                                <DataTemplate x:Key="GridThirdSurvivorPerks">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.ThirdSurvivor.TogglePerkSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedThird}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>

                                                <DataTemplate x:Key="BurgerThirdSurvivorPerks">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}"  Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.ThirdSurvivor.TogglePerkSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                    </Border>
                                                </DataTemplate>

                                            </ListView.Resources>

                                            <ListView.Style>
                                                <Style TargetType="ListView" BasedOn="{StaticResource AddMatch.ListView.Base}">
                                                    <Setter Property="ItemTemplate" Value="{StaticResource GridThirdSurvivorPerks}"/>
                                                    <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding ThirdSurvivor.PerksViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Grid}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource GridThirdSurvivorPerks}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding ThirdSurvivor.PerksViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Burger}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource BurgerThirdSurvivorPerks}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.Style>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedThird}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedThird}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                                <TabItem Header="Предмет">

                                    <!--#region Предмет и его улучшение-->

                                    <Grid Grid.Row="1" Grid.Column="1">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Список предметов -->

                                        <ListView Grid.Row="0" 
                                                  ItemsSource="{Binding Items}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectedItem="{Binding ThirdSurvivor.SelectedItem}"
                                                  Style="{StaticResource ListView.Base}"
                                                  ItemsPanel="{StaticResource WrapPanelTemplate}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <!--#region ItemTemplate: Разметка каждого элемента -->

                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" CornerRadius="10" Height="100">
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="10" HorizontalAlignment="Left"/>
                                                        </DockPanel>
                                                    </Border>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>

                                            <!--#endregion-->

                                            <!--#region ItemContainerStyle -->

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem">
                                                    <Setter Property="Padding" Value="0"/>
                                                    <Setter Property="Margin" Value="2"/>
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                                    <Setter Property="BorderThickness" Value="2"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="ListViewItem">
                                                                <Border x:Name="mainBorder"
                                                                        Background="{TemplateBinding Background}"
                                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                                        Padding="{TemplateBinding Padding}"
                                                                        Margin="{TemplateBinding Margin}"
                                                                        CornerRadius="10"
                                                                        SnapsToDevicePixels="true">
                                                                    <ContentPresenter />
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsSelected" Value="True">
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </Trigger>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>

                                            </ListView.ItemContainerStyle>

                                            <!--#endregion-->

                                        </ListView>

                                        <!--#endregion-->

                                        <!--#region Список улучшений -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding ThirdSurvivor.ItemAddonsView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  Style="{StaticResource ListView.Base}"
                                                  ItemsPanel="{StaticResource StackPanelTemplate}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <!--#region ItemTemplate: Разметка каждого элемента -->

                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.ThirdSurvivor.ToggleAddonSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedThird}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>

                                            <!--#endregion-->

                                            <!--#region ItemContainerStyle -->

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedThird}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedThird}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                            <!--#endregion-->

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                                <TabItem Header="Подношения">

                                    <!--#region Подношения-->

                                    <Grid Grid.Row="1" Grid.Column="2">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Элементы управления -->

                                        <WrapPanel>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding ThirdSurvivor.OfferingsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Grid}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource BurgerMenu}"/>
                                                </Button.Content>
                                            </Button>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding ThirdSurvivor.OfferingsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Burger}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource GridMenu}"/>
                                                </Button.Content>
                                            </Button>
                                        </WrapPanel>

                                        <!--#endregion-->

                                        <!--#region Список -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding ThirdSurvivor.OfferingsView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <ListView.Resources>

                                                <DataTemplate x:Key="GridThirdSurvivorOfferings">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.ThirdSurvivor.ToggleOfferingSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedThird}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>

                                                <DataTemplate x:Key="BurgerThirdSurvivorOfferings">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}"  Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.ThirdSurvivor.ToggleOfferingSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                    </Border>
                                                </DataTemplate>

                                            </ListView.Resources>

                                            <ListView.Style>
                                                <Style TargetType="ListView" BasedOn="{StaticResource AddMatch.ListView.Base}">
                                                    <Setter Property="ItemTemplate" Value="{StaticResource GridThirdSurvivorOfferings}"/>
                                                    <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding ThirdSurvivor.OfferingsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Grid}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource GridThirdSurvivorOfferings}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding ThirdSurvivor.OfferingsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Burger}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource BurgerThirdSurvivorOfferings}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.Style>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedThird}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}" Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedThird}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                            </TabControl>
                        </Border>
                    </Grid>
                </Grid>
            </TabItem>

            <!--#endregion-->

            <!--#region Выживший №4 -->

            <TabItem Header="Выживший #4">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="500"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!--#region Доп инфа -->

                        <Border Grid.Column="0" Grid.Row="0" Style="{StaticResource Border.ContentBlock}">
                            <DockPanel Margin="10">

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Steam" VerticalAlignment="Center"/>

                                    <ListView ItemsSource="{Binding Platforms}"
                                              SelectedItem="{Binding FourthSurvivor.Platform}"
                                              d:ItemsSource="{d:SampleData ItemCount=2}"
                                              Style="{StaticResource AddMatch.ListView.Base}"
                                              Background="Transparent"
                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                              VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,2,0,10">

                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Rows="1"/>
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>

                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="Padding" Value="0"/>
                                                <Setter Property="Margin" Value="2"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="BorderThickness" Value="2"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                            <Border x:Name="mainBorder"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                Padding="{TemplateBinding Padding}"
                                                                Margin="{TemplateBinding Margin}"
                                                                CornerRadius="6"
                                                                SnapsToDevicePixels="true">
                                                                <ContentPresenter />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                    </ListView>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top"  Margin="0,2,0,10">
                                    <TextBlock Text="Анонимный"/>
                                    <ToggleButton IsChecked="{Binding FourthSurvivor.IsAnanyms}" Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Игрок вышел?"/>
                                    <ToggleButton IsChecked="{Binding FourthSurvivor.IsBot}" Style="{StaticResource ItemsPanelTemplateToggleButton}" HorizontalAlignment="Right"/>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <DockPanel DockPanel.Dock="Top" Margin="0,2,0,10">
                                    <TextBlock Text="Ассоциация" VerticalAlignment="Center"/>

                                    <ListView ItemsSource="{Binding PlayerAssociations}"
                                              SelectedItem="{Binding FourthSurvivor.PlayerAssociation}"
                                              d:ItemsSource="{d:SampleData ItemCount=2}"
                                              Style="{StaticResource AddMatch.ListView.Base}"
                                              Background="Transparent"
                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                              VerticalAlignment="Center" HorizontalAlignment="Right">

                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Rows="1"/>
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>

                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="Padding" Value="0"/>
                                                <Setter Property="Margin" Value="2"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="BorderThickness" Value="2"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                            <Border x:Name="mainBorder"
                                                                    Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                                    Padding="{TemplateBinding Padding}"
                                                                    Margin="{TemplateBinding Margin}"
                                                                    CornerRadius="6"
                                                                    SnapsToDevicePixels="true">
                                                                <ContentPresenter />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                    </ListView>
                                </DockPanel>

                                <Separator DockPanel.Dock="Top"/>

                                <Grid DockPanel.Dock="Top">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Column="0" Grid.Row="1" Text="Престиж" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Column="1" Grid.Row="1" SelectedItem="{Binding FourthSurvivor.Prestige}" ItemsSource="{Binding Prestige}" Style="{StaticResource BaseComboBox}" Width="100" VerticalAlignment="Center" HorizontalAlignment="Right"/>

                                    <TextBlock  Grid.Column="0" Grid.Row="0" Text="Счет" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Grid.Row="0" Text="{Binding FourthSurvivor.Score}" Style="{StaticResource TextBox.InputData}" Width="100" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                                </Grid>

                                <ListView ItemsSource="{Binding TypeDeaths}"
                                          SelectedItem="{Binding FourthSurvivor.TypeDeath}"
                                          d:ItemsSource="{d:SampleData ItemCount=5}"
                                          Style="{StaticResource AddMatch.ListView.Base}"
                                          Background="Transparent"
                                          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                          VerticalAlignment="Top" Margin="0,2,0,10">

                                    <ListView.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Rows="1"/>
                                        </ItemsPanelTemplate>
                                    </ListView.ItemsPanel>

                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Name}" FontSize="15" Foreground="White" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>

                                    <ListView.ItemContainerStyle>
                                        <Style TargetType="ListViewItem">
                                            <Setter Property="Padding" Value="0"/>
                                            <Setter Property="Margin" Value="2"/>
                                            <Setter Property="Background" Value="Transparent"/>
                                            <Setter Property="BorderBrush" Value="Transparent"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="ListViewItem">
                                                        <Border x:Name="mainBorder"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                Padding="{TemplateBinding Padding}"
                                                                Margin="{TemplateBinding Margin}"
                                                                CornerRadius="6"
                                                                SnapsToDevicePixels="true">
                                                            <ContentPresenter />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                    <Setter Property="Background" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                </Trigger>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ListView.ItemContainerStyle>
                                </ListView>

                            </DockPanel>
                        </Border>

                        <!--#endregion-->

                        <!--#region Вырезка из скрина с итогами -->

                        <Border Grid.Column="1" Grid.ColumnSpan="2" Style="{StaticResource Border.ContentBlock}">
                            <Image Source="{Binding FourthSurvivor.MatchImage}"/>
                        </Border>

                        <!--#endregion-->

                        <!--#region Выжившие -->

                        <Border Grid.Column="0" Grid.Row="1" Style="{StaticResource Border.ContentBlock}">
                            <ListView ItemsSource="{Binding Survivors}"
                                      d:ItemsSource="{d:SampleData ItemCount=5}"
                                      SelectedItem="{Binding FourthSurvivor.SelectedSurvivor}"
                                      Style="{StaticResource ListView.Base}"
                                      ItemsPanel="{StaticResource StackPanelTemplate}"
                                      SelectionMode="Single"
                                      ScrollViewer.CanContentScroll="False"
                                      VirtualizingPanel.ScrollUnit="Pixel"
                                      ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                      VirtualizingPanel.IsVirtualizing="True"
                                      VirtualizingStackPanel.VirtualizationMode="Recycling"
                                      VirtualizingPanel.CacheLength="15,15"
                                      VirtualizingPanel.CacheLengthUnit="Item">

                                <!--#region ItemContainerStyle -->

                                <ListView.ItemContainerStyle>
                                    <Style TargetType="ListViewItem">
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="2"/>
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="2"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ListViewItem">
                                                    <Border x:Name="mainBorder"
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            Padding="{TemplateBinding Padding}"
                                                            Margin="{TemplateBinding Margin}"
                                                            CornerRadius="10"
                                                            SnapsToDevicePixels="true">
                                                        <ContentPresenter />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>

                                </ListView.ItemContainerStyle>

                                <!--#endregion-->

                                <!--#region ItemTemplate: Разметка каждого элемента -->

                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" CornerRadius="10" Height="100">
                                            <DockPanel>
                                                <Image Source="{Binding Image}" Margin="10" HorizontalAlignment="Left"/>
                                                <TextBlock Text="{Binding Name}" FontSize="16" Margin="2,5,0,0" Foreground="White" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                            </DockPanel>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>

                                <!--#endregion-->

                            </ListView>
                        </Border>

                        <!--#endregion-->

                        <Border Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1" Style="{StaticResource Border.ContentBlock}">
                            <TabControl SelectedIndex="{Binding FourthSurvivorTabControlIndex}">

                                <TabItem Header="Перки">

                                    <!--#region Перки первого выжившего -->

                                    <Grid Grid.Row="1" Grid.Column="0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Элементы управления -->

                                        <WrapPanel>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding FourthSurvivor.PerksViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Grid}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource BurgerMenu}"/>
                                                </Button.Content>
                                            </Button>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding FourthSurvivor.PerksViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Burger}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource GridMenu}"/>
                                                </Button.Content>
                                            </Button>
                                        </WrapPanel>

                                        <!--#endregion-->

                                        <!--#region Список -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding FourthSurvivor.PerksView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <ListView.Resources>

                                                <DataTemplate x:Key="GridFourthSurvivorPerks">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.FourthSurvivor.TogglePerkSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedFourth}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>

                                                <DataTemplate x:Key="BurgerFourthSurvivorPerks">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}"  Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.FourthSurvivor.TogglePerkSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                    </Border>
                                                </DataTemplate>

                                            </ListView.Resources>

                                            <ListView.Style>
                                                <Style TargetType="ListView" BasedOn="{StaticResource AddMatch.ListView.Base}">
                                                    <Setter Property="ItemTemplate" Value="{StaticResource GridFourthSurvivorPerks}"/>
                                                    <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding FourthSurvivor.PerksViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Grid}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource GridFourthSurvivorPerks}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding FourthSurvivor.PerksViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Burger}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource BurgerFourthSurvivorPerks}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.Style>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFourth}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFourth}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                                <TabItem Header="Предмет">

                                    <!--#region Предмет и его улучшение-->

                                    <Grid Grid.Row="1" Grid.Column="1">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Список предметов -->

                                        <ListView Grid.Row="0" 
                                                  ItemsSource="{Binding Items}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectedItem="{Binding FourthSurvivor.SelectedItem}"
                                                  Style="{StaticResource ListView.Base}"
                                                  ItemsPanel="{StaticResource WrapPanelTemplate}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <!--#region ItemTemplate: Разметка каждого элемента -->

                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" CornerRadius="10" Height="100">
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="10" HorizontalAlignment="Left"/>
                                                        </DockPanel>
                                                    </Border>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>

                                            <!--#endregion-->

                                            <!--#region ItemContainerStyle -->

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem">
                                                    <Setter Property="Padding" Value="0"/>
                                                    <Setter Property="Margin" Value="2"/>
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                                    <Setter Property="BorderThickness" Value="2"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="ListViewItem">
                                                                <Border x:Name="mainBorder"
                                                                        Background="{TemplateBinding Background}"
                                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                                        Padding="{TemplateBinding Padding}"
                                                                        Margin="{TemplateBinding Margin}"
                                                                        CornerRadius="10"
                                                                        SnapsToDevicePixels="true">
                                                                    <ContentPresenter />
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsSelected" Value="True">
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </Trigger>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>

                                            </ListView.ItemContainerStyle>

                                            <!--#endregion-->

                                        </ListView>

                                        <!--#endregion-->

                                        <!--#region Список улучшений -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding FourthSurvivor.ItemAddonsView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  Style="{StaticResource ListView.Base}"
                                                  ItemsPanel="{StaticResource StackPanelTemplate}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <!--#region ItemTemplate: Разметка каждого элемента -->

                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.FourthSurvivor.ToggleAddonSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedFourth}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>

                                            <!--#endregion-->

                                            <!--#region ItemContainerStyle -->

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFourth}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFourth}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                            <!--#endregion-->

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                                <TabItem Header="Подношения">

                                    <!--#region Подношения-->

                                    <Grid Grid.Row="1" Grid.Column="2">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <!--#region Элементы управления -->

                                        <WrapPanel>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding FourthSurvivor.OfferingsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Grid}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource BurgerMenu}"/>
                                                </Button.Content>
                                            </Button>
                                            <Button Style="{StaticResource Button.App}"
                                                    Command="{Binding FourthSurvivor.OfferingsViewController.SetTypeCommand}"
                                                    CommandParameter="{x:Static enums:DisplayCollectionType.Burger}">
                                                <Button.Content>
                                                    <Control Template="{StaticResource GridMenu}"/>
                                                </Button.Content>
                                            </Button>
                                        </WrapPanel>

                                        <!--#endregion-->

                                        <!--#region Список -->

                                        <ListView Grid.Row="1" 
                                                  ItemsSource="{Binding FourthSurvivor.OfferingsView}"
                                                  d:ItemsSource="{d:SampleData ItemCount=10}"
                                                  SelectionMode="Single"
                                                  ScrollViewer.CanContentScroll="False"
                                                  VirtualizingPanel.ScrollUnit="Pixel"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  VirtualizingPanel.IsVirtualizing="True"
                                                  VirtualizingStackPanel.VirtualizationMode="Recycling"
                                                  VirtualizingPanel.CacheLength="15,15"
                                                  VirtualizingPanel.CacheLengthUnit="Item">

                                            <ListView.Resources>

                                                <DataTemplate x:Key="GridFourthSurvivorOfferings">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}" Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.FourthSurvivor.ToggleOfferingSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <DockPanel>
                                                            <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                            <TextBlock Text="{Binding Name}" Margin="10,5,0,0" Foreground="White" FontSize="16" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                                                            <Control x:Name="pinIcon" Template="{StaticResource Pin}" Foreground="Yellow" Width="30" Margin="10" HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="Collapsed"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsPinnedFourth}" Value="True">
                                                            <Setter TargetName="pinIcon" Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>

                                                <DataTemplate x:Key="BurgerFourthSurvivorOfferings">
                                                    <Border x:Name="mainBorder" Background="{StaticResource Solid.Border.ListView.ContentBlock.Background}"  Height="75" CornerRadius="10">
                                                        <Border.InputBindings>
                                                            <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.FourthSurvivor.ToggleOfferingSelectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}" CommandParameter="{Binding}"/>
                                                        </Border.InputBindings>
                                                        <Image Source="{Binding Image}" Margin="0" Width="75" DockPanel.Dock="Left"/>
                                                    </Border>
                                                </DataTemplate>

                                            </ListView.Resources>

                                            <ListView.Style>
                                                <Style TargetType="ListView" BasedOn="{StaticResource AddMatch.ListView.Base}">
                                                    <Setter Property="ItemTemplate" Value="{StaticResource GridFourthSurvivorOfferings}"/>
                                                    <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding FourthSurvivor.OfferingsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Grid}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource GridFourthSurvivorOfferings}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource StackPanelTemplate}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding FourthSurvivor.OfferingsViewController.CurrentType}" Value="{x:Static enums:DisplayCollectionType.Burger}">
                                                            <Setter Property="ItemTemplate" Value="{StaticResource BurgerFourthSurvivorOfferings}"/>
                                                            <Setter Property="ItemsPanel" Value="{StaticResource WrapPanelTemplate}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.Style>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem" BasedOn="{StaticResource ListViewItem.AddMAtchPage.Base}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="{StaticResource Solid.SelectedItem.Card}"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFourth}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=DataContext.CurrentDisplayCollectionType, RelativeSource={RelativeSource AncestorType=ListView}}"  Value="Burger"/>
                                                                <Condition Binding="{Binding Path=IsPinnedFourth}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="BorderBrush" Value="Yellow"/>
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                        </ListView>

                                        <!--#endregion-->

                                    </Grid>

                                    <!--#endregion-->

                                </TabItem>

                            </TabControl>
                        </Border>
                    </Grid>
                </Grid>
            </TabItem>

            <!--#endregion-->

            <!--#region Матч -->

            <TabItem Header="Матч">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="600"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!--#region Список игроков ( для повесов ) -->

                    <Border Style="{StaticResource Border.ContentBlock}" Height="300"
                            Grid.Column="0" Grid.Row="0">
                        <Image Source="{Binding Match.EndMatchImage}"/>
                    </Border>

                    <!--#endregion-->

                    <!--#region Название карты -->

                    <Border Style="{StaticResource Border.ContentBlock}" Height="100"
                            Grid.Column="1" Grid.Row="0">
                        <Image Source="{Binding Match.StartMatchImage}"/>
                    </Border>

                    <!--#endregion-->

                    <!--#region Итоговая таблица -->


                    <Border Style="{StaticResource Border.ContentBlock}" Height="Auto"
                            Grid.Column="0" Grid.Row="1">
                        <Image Source="{Binding Match.ResultMatchImage}"/>
                    </Border>

                    <!--#endregion-->

                    <!--#region Выбор данных -->

                    <Border Style="{StaticResource Border.ContentBlock}"
                            Grid.Column="1" Grid.Row="1">

                        <DockPanel>

                            <TextBlock Text="Основная информация"
                                       HorizontalAlignment="Center"
                                       DockPanel.Dock="Top"/>

                            <DockPanel DockPanel.Dock="Top">
                                <TextBlock Text="Дата провидения матча"
                                           DockPanel.Dock="Left"/>
                                <DatePicker SelectedDate="{Binding Match.Date}"
                                            HorizontalAlignment="Right"
                                            Width="200" MaxWidth="200"/>
                            </DockPanel>

                            <DockPanel DockPanel.Dock="Top">
                                <TextBlock Text="Длительность"
                                           DockPanel.Dock="Left"/>
                                <TextBlock Text="{Binding Match.Duration}" d:Text="15 минут 55 секунд"
                                           HorizontalAlignment="Right"/>
                            </DockPanel>

                            <DockPanel DockPanel.Dock="Top">
                                <TextBlock Text="Кол-во убийств"
                                           DockPanel.Dock="Left"/>
                                <ComboBox Style="{StaticResource BaseComboBox}"
                                          ItemsSource="{Binding Kills}"
                                          SelectedItem="{Binding Match.CountKills}"
                                          Width="200" MaxWidth="200"
                                          HorizontalAlignment="Right"/>
                                <!--<TextBlock Text="{Binding Match.CountKills}" d:Text="4"
                                           HorizontalAlignment="Right"/>-->
                            </DockPanel>

                            <DockPanel DockPanel.Dock="Top">
                                <TextBlock Text="Кол-во повесов"
                                           DockPanel.Dock="Left"/>
                                <ComboBox Style="{StaticResource BaseComboBox}"
                                          ItemsSource="{Binding Hooks}"
                                          SelectedItem="{Binding Match.CountHooks}"
                                          Width="200" MaxWidth="200"
                                          HorizontalAlignment="Right"/>
                                <!--<TextBlock Text="{Binding Match.CountHooks}" d:Text="12"
                                           HorizontalAlignment="Right"/>-->
                            </DockPanel>

                            <DockPanel DockPanel.Dock="Top">
                                <TextBlock Text="Кол-во оставшихся генераторов"
                                           DockPanel.Dock="Left"/>
                                <ComboBox Style="{StaticResource BaseComboBox}"
                                          ItemsSource="{Binding RecentGenerators}"
                                          SelectedItem="{Binding Match.RecentGenerators}"
                                          Width="200" MaxWidth="200"
                                          HorizontalAlignment="Right"/>
                                <!--<TextBlock Text="{Binding Match.RecentGenerators}" d:Text="12"
                                           HorizontalAlignment="Right"/>-->
                            </DockPanel>

                            <DockPanel DockPanel.Dock="Top">
                                <TextBlock Text="Карта"
                                           DockPanel.Dock="Left"/>
                                <ComboBox ItemsSource="{Binding Maps}" 
                                          SelectedItem="{Binding Match.Map}"
                                          Style="{StaticResource BaseComboBox}" Text="12"
                                          DisplayMemberPath="Name"
                                          Width="200" MaxWidth="200"
                                          HorizontalAlignment="Right"/>
                            </DockPanel>

                            <TextBlock Text="Дополнительная информация"
                                       HorizontalAlignment="Center"
                                       DockPanel.Dock="Top"/>

                            <DockPanel DockPanel.Dock="Top">
                                <TextBlock Text="Патч"
                                           DockPanel.Dock="Left"/>
                                <ComboBox ItemsSource="{Binding Patches}"
                                          SelectedItem="{Binding Match.Patch}"
                                          Style="{StaticResource BaseComboBox}" Text="12"
                                          DisplayMemberPath="Name"
                                          Width="200" MaxWidth="200"
                                          HorizontalAlignment="Right"/>
                            </DockPanel>

                            <DockPanel DockPanel.Dock="Top">
                                <TextBlock Text="Режим игры"
                                           DockPanel.Dock="Left"/>
                                <ComboBox ItemsSource="{Binding GameModes}"
                                          SelectedItem="{Binding Match.GameMode}"
                                          Style="{StaticResource BaseComboBox}" Text="12"
                                          DisplayMemberPath="Name"
                                          Width="200" MaxWidth="200"
                                          HorizontalAlignment="Right"/>
                            </DockPanel>

                            <DockPanel DockPanel.Dock="Top">
                                <TextBlock Text="Игровое событие"
                                           DockPanel.Dock="Left"/>
                                <ComboBox ItemsSource="{Binding GameEvents}"
                                          SelectedItem="{Binding Match.GameEvent}"
                                          Style="{StaticResource BaseComboBox}" Text="12"
                                          DisplayMemberPath="Name"
                                          Width="200" MaxWidth="200"
                                          HorizontalAlignment="Right"/>
                            </DockPanel>

                            <DockPanel DockPanel.Dock="Top">
                                <TextBlock Text="Кто поставил карту"
                                           DockPanel.Dock="Left"/>
                                <ComboBox ItemsSource="{Binding WhoPlacedMaps}"
                                          SelectedItem="{Binding Match.WhoPlacedMap}"
                                          Style="{StaticResource BaseComboBox}" Text="12"
                                          DisplayMemberPath="Name"
                                          Width="200" MaxWidth="200"
                                          HorizontalAlignment="Right"/>
                            </DockPanel>

                            <DockPanel VerticalAlignment="Top">
                                <TextBlock Text="Чья карта выпала"
                                           DockPanel.Dock="Left"/>
                                <ComboBox ItemsSource="{Binding WhoPlacedMaps}"
                                          SelectedItem="{Binding Match.WhoPlacedMapWin}"
                                          Style="{StaticResource BaseComboBox}" Text="12"
                                          DisplayMemberPath="Name"
                                          Width="200" MaxWidth="200"
                                          HorizontalAlignment="Right"/>
                            </DockPanel>

                        </DockPanel>

                    </Border>

                    <!--#endregion-->

                </Grid>
            </TabItem>

            <!--#endregion-->

        </TabControl>

    </Grid>
</Page>